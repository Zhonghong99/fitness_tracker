<!-- templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Fitness Tracker</title>
    <!-- Add Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Add custom CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <!-- Add this in the head section for searchable dropdown -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #3b82f6;
            --background-color: #f8fafc;
            --card-bg: rgba(255, 255, 255, 0.9);
            --text-primary: #1e293b;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f6f8ff 0%, #f0f4ff 100%);
            color: var(--text-primary);
        }

        .container {
            padding: 15px;
            max-width: 1400px;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            background-color: white;
        }
        .card-header {
            background-color: #007bff;
            color: white;
            border-radius: 15px 15px 0 0 !important;
            padding: 15px;
        }
        .form-control {
            border-radius: 8px;
            border: 1px solid #ddd;
            padding: 10px;
            margin-bottom: 10px;
        }
        .btn-primary {
            border-radius: 8px;
            padding: 10px 20px;
            width: 100%;
        }
        .history-entry {
            border-left: 4px solid #007bff;
            margin: 10px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 0 8px 8px 0;
            transition: transform 0.2s;
        }
        .history-entry:hover {
            transform: translateX(5px);
            background-color: #e9ecef;
        }
        .stats {
            font-size: 1.1em;
            color: #495057;
        }
        .date-time {
            color: #6c757d;
            font-size: 0.9em;
        }
        .exercise-tooltip {
            position: relative;
            cursor: help;
            margin-left: 10px;
        }

        .tooltip-content {
            visibility: hidden;
            opacity: 0;
            position: absolute;
            z-index: 1000;
            background: #1e293b;
            color: white;
            padding: 12px 15px;
            border-radius: 12px;
            width: 220px;
            right: 0;
            top: 100%;
            margin-top: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

        .exercise-tooltip:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
        }

        .muscle-group {
            margin-top: 8px;
        }

        .muscle-group-label {
            font-weight: 600;
            color: #60a5fa;
        }

        .exercise-select-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .select2-container {
            width: 100% !important;
        }

        .select2-selection {
            height: 38px !important;
            padding: 5px !important;
            border: 1px solid #ddd !important;
            border-radius: 8px !important;
        }

        .fc-event {
            cursor: pointer;
        }
        .fc-event:hover {
            opacity: 0.8;
        }
        #calendar {
            margin: 20px 0;
            background-color: white;
        }
        .history-entry {
            transition: background-color 0.5s ease;
        }
        .calendar-card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .calendar-header {
            background: linear-gradient(135deg, #0061f2 0%, #00a3ff 100%);
            color: white;
            border-radius: 20px 20px 0 0;
            padding: 20px;
        }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .stat-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .quote-card {
            position: fixed;
            bottom: 10px;
            right: 10px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: #ffffff;
            max-width: 250px;
            padding: 12px;
            border-left: 3px solid #0061f2;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .quote-card.collapsed {
            max-width: 35px;
            max-height: 35px;
            padding: 8px;
        }

        .quote-toggle {
            position: absolute;
            top: 6px;
            right: 6px;
            padding: 2px;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .quote-text {
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 6px;
        }

        .quote-author {
            font-size: 0.75rem;
            color: #a0a0a0;
            margin-top: 6px;
        }

        .quote-indicator {
            font-size: 1rem;
        }

        /* Calendar Styling */
        .fc {
            background: white;
            padding: 20px;
            border-radius: 0 0 20px 20px;
        }

        .fc-button {
            background: #0061f2 !important;
            border: none !important;
            box-shadow: none !important;
        }

        .fc-event {
            border-radius: 5px !important;
            padding: 3px 5px !important;
        }

        .fc-day-today {
            background: #f8f9fa !important;
        }

        .calendar-card {
            position: sticky;
            top: 20px;
        }

        @media (max-width: 991px) {
            .container {
                padding: 12px;
            }

            .glass-card {
                margin-bottom: 20px;
            }

            .history-entry {
                padding: 15px;
                margin-bottom: 15px;
            }

            .tooltip-content {
                width: 200px;
                left: 50%;
                transform: translateX(-50%);
                right: auto;
            }
        }

        @media (max-width: 576px) {
            .stats-container {
                grid-template-columns: 1fr;
            }

            .container {
                padding: 5px;
            }

            .card-header {
                padding: 12px 15px;
            }

            .quote-card {
                max-width: 180px;
                font-size: 0.8rem;
            }
        }

        /* Ensure proper spacing between stacked elements */
        .g-4 > * {
            margin-bottom: 1.5rem;
        }

        /* Make cards full width on mobile */
        .card {
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center mb-4">ðŸ’ª Fitness Tracker</h1>
        
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-icon">ðŸŽ¯</div>
                <div class="stat-number">{{ monthly_sessions }}</div>
                <div class="stat-label">Sessions this month</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ðŸ’ª</div>
                <div class="stat-number">{{ total_exercises }}</div>
                <div class="stat-label">Total exercises</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">ðŸ”¥</div>
                <div class="stat-number">{{ streak_days }}</div>
                <div class="stat-label">Day streak</div>
            </div>
        </div>

        <div class="row g-4">
            <div class="col-12 col-lg-5 order-1">
                <div class="card glass-card">
                    <div class="card-header modern-header">
                        <h5 class="mb-0">Add Exercise</h5>
                    </div>
                    <div class="card-body">
                        <form method="POST" id="exerciseForm">
                            <div class="mb-3">
                                <label class="form-label">Date:</label>
                                <input type="datetime-local" class="form-control" name="exercise_date" id="exerciseDate" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Exercise:</label>
                                <div class="exercise-select-wrapper">
                                    <select class="form-control select2" name="type" id="exerciseSelect" required>
                                        <option value="">Search or select exercise</option>
                                        <optgroup label="Chest">
                                            <option value="Flat Bench Press">Flat Bench Press</option>
                                            <option value="Incline Bench Press">Incline Bench Press</option>
                                            <option value="Decline Bench Press">Decline Bench Press</option>
                                            <option value="Dumbbell Press">Dumbbell Press</option>
                                            <option value="Push-ups">Push-ups</option>
                                            <option value="Dips">Dips</option>
                                            <option value="Cable Flyes">Cable Flyes</option>
                                            <option value="Dumbbell Flyes">Dumbbell Flyes</option>
                                            <option value="Pec Deck">Pec Deck</option>
                                            <option value="Landmine Press">Landmine Press</option>
                                        </optgroup>
                                        <optgroup label="Back">
                                            <option value="Deadlifts">Deadlifts</option>
                                            <option value="Pull-ups/Chin-ups">Pull-ups/Chin-ups</option>
                                            <option value="Bent Over Rows">Bent Over Rows</option>
                                            <option value="T-Bar Rows">T-Bar Rows</option>
                                            <option value="Lat Pulldowns">Lat Pulldowns</option>
                                            <option value="Seated Cable Rows">Seated Cable Rows</option>
                                            <option value="Single-Arm Dumbbell Rows">Single-Arm Dumbbell Rows</option>
                                            <option value="Meadows Rows">Meadows Rows</option>
                                            <option value="Straight Arm Pulldowns">Straight Arm Pulldowns</option>
                                            <option value="Rack Pulls">Rack Pulls</option>
                                        </optgroup>
                                        <optgroup label="Biceps">
                                            <option value="Standing Barbell Curls">Standing Barbell Curls</option>
                                            <option value="Alternating Dumbbell Curls">Alternating Dumbbell Curls</option>
                                            <option value="Hammer Curls">Hammer Curls</option>
                                            <option value="Preacher Curls">Preacher Curls</option>
                                            <option value="Incline Dumbbell Curls">Incline Dumbbell Curls</option>
                                            <option value="Spider Curls">Spider Curls</option>
                                            <option value="Cable Curls">Cable Curls</option>
                                            <option value="Concentration Curls">Concentration Curls</option>
                                            <option value="EZ Bar Curls">EZ Bar Curls</option>
                                            <option value="Reverse Curls">Reverse Curls</option>
                                        </optgroup>
                                        <optgroup label="Triceps">
                                            <option value="Close Grip Bench Press">Close Grip Bench Press</option>
                                            <option value="Skull Crushers">Skull Crushers</option>
                                            <option value="Rope Pushdowns">Rope Pushdowns</option>
                                            <option value="V-Bar Pushdowns">V-Bar Pushdowns</option>
                                            <option value="Overhead Extensions">Overhead Extensions</option>
                                            <option value="Diamond Push-ups">Diamond Push-ups</option>
                                            <option value="Single Arm Extensions">Single Arm Extensions</option>
                                            <option value="JM Press">JM Press</option>
                                            <option value="Dips">Dips</option>
                                            <option value="French Press">French Press</option>
                                        </optgroup>
                                        <optgroup label="Shoulders">
                                            <option value="Military Press">Military Press</option>
                                            <option value="Arnold Press">Arnold Press</option>
                                            <option value="Lateral Raises">Lateral Raises</option>
                                            <option value="Face Pulls">Face Pulls</option>
                                            <option value="Reverse Pec Deck">Reverse Pec Deck</option>
                                            <option value="Front Raises">Front Raises</option>
                                            <option value="Bent Over Lateral Raises">Bent Over Lateral Raises</option>
                                            <option value="Cable Lateral Raises">Cable Lateral Raises</option>
                                            <option value="Upright Rows">Upright Rows</option>
                                            <option value="Behind Neck Press">Behind Neck Press</option>
                                        </optgroup>
                                        <optgroup label="Legs">
                                            <option value="Back Squats">Back Squats</option>
                                            <option value="Front Squats">Front Squats</option>
                                            <option value="Romanian Deadlifts">Romanian Deadlifts</option>
                                            <option value="Bulgarian Split Squats">Bulgarian Split Squats</option>
                                            <option value="Walking Lunges">Walking Lunges</option>
                                            <option value="Hack Squats">Hack Squats</option>
                                            <option value="Leg Press">Leg Press</option>
                                            <option value="Standing Calf Raises">Standing Calf Raises</option>
                                            <option value="Seated Calf Raises">Seated Calf Raises</option>
                                            <option value="Leg Extensions">Leg Extensions</option>
                                            <option value="Lying Leg Curls">Lying Leg Curls</option>
                                            <option value="Good Mornings">Good Mornings</option>
                                            <option value="Hip Thrusts">Hip Thrusts</option>
                                            <option value="Sissy Squats">Sissy Squats</option>
                                            <option value="Box Squats">Box Squats</option>
                                        </optgroup>
                                    </select>
                                    <div class="exercise-tooltip">
                                        <i class="bi bi-info-circle"></i>
                                        <div class="tooltip-content" id="exerciseInfo">
                                            Select an exercise to see target muscles
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Number of Sets:</label>
                                <input type="number" class="form-control" name="num_sets" id="numSets" 
                                       required min="1" max="10" value="1">
                            </div>
                            
                            <div id="setInputs" class="mb-3">
                                <!-- Set inputs will be dynamically added here -->
                            </div>
                            
                            <button type="submit" name="exercise" class="btn btn-primary">
                                Add Exercise
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <div class="col-12 col-lg-7 order-2">
                <div class="card glass-card">
                    <div class="card-header modern-header">
                        <h5 class="mb-0">Exercise History</h5>
                    </div>
                    <div class="card-body">
                        <div class="history-container">
                            {% for exercise in exercises %}
                            <div class="history-entry glass-effect" id="exercise-{{ exercise.id }}">
                                <div class="stats">
                                    <strong>{{ exercise.type }}</strong>
                                    <div class="mt-2">
                                        {% for set in exercise.sets %}
                                        <div class="set-details">
                                            <span class="badge bg-primary">Set {{ set.set_number }}</span>
                                            <span class="badge bg-success">{{ set.weight }}kg</span>
                                            <span class="badge bg-info">{{ set.reps }} reps</span>
                                            <span class="badge bg-warning">Total: {{ set.total }}kg</span>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="date-time mt-2">
                                    ðŸ“… {{ exercise.date.strftime('%Y-%m-%d %H:%M') }} MYT
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 order-3">
                <div class="calendar-card glass-card">
                    <div class="calendar-header modern-header">
                        <h5 class="mb-0">Fitness Journey</h5>
                    </div>
                    <div id="calendar"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Motivational Quote Card -->
    <div class="quote-card" id="quoteCard">
        <button class="quote-toggle" onclick="toggleQuote()">
            <i class="bi bi-chevron-down" id="quoteToggleIcon"></i>
        </button>
        <div class="quote-indicator">ðŸ’ª</div>
        <div class="quote-content">
            <div class="quote-text" id="quote-text"></div>
            <div class="quote-author" id="quote-author"></div>
        </div>
    </div>

    <!-- Add Bootstrap JS and its dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Add these scripts before the closing body tag, after Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js"></script>
    <script>
    // Complete exercise data with muscle information
    const exerciseData = {
        // CHEST EXERCISES
        "Flat Bench Press": {
            primary: ["Middle Chest (Pectoralis Major)"],
            secondary: ["Front Deltoids", "Triceps"],
            stabilizers: ["Rotator Cuff", "Core", "Serratus Anterior"]
        },
        "Incline Bench Press": {
            primary: ["Upper Chest (Clavicular Head)"],
            secondary: ["Front Deltoids", "Triceps"],
            stabilizers: ["Rotator Cuff", "Core", "Serratus Anterior"]
        },
        "Decline Bench Press": {
            primary: ["Lower Chest (Sternal Head)"],
            secondary: ["Triceps", "Front Deltoids"],
            stabilizers: ["Core", "Serratus Anterior"]
        },
        "Dumbbell Press": {
            primary: ["Chest (Pectoralis Major)"],
            secondary: ["Front Deltoids", "Triceps"],
            stabilizers: ["Rotator Cuff", "Core", "Stabilizing Muscles"]
        },
        "Push-ups": {
            primary: ["Chest (Pectoralis Major)"],
            secondary: ["Triceps", "Front Deltoids"],
            stabilizers: ["Core", "Serratus Anterior", "Lower Back"]
        },
        "Dips": {
            primary: ["Lower Chest", "Triceps"],
            secondary: ["Front Deltoids", "Serratus Anterior"],
            stabilizers: ["Core", "Rotator Cuff"]
        },
        "Cable Flyes": {
            primary: ["Chest (Pectoralis Major)"],
            secondary: ["Front Deltoids"],
            stabilizers: ["Rotator Cuff", "Core"]
        },
        "Dumbbell Flyes": {
            primary: ["Chest (Pectoralis Major)"],
            secondary: ["Front Deltoids"],
            stabilizers: ["Rotator Cuff", "Core", "Biceps (stabilizing)"]
        },
        "Pec Deck": {
            primary: ["Chest (Pectoralis Major)"],
            secondary: ["Front Deltoids"],
            stabilizers: ["Rotator Cuff"]
        },
        "Landmine Press": {
            primary: ["Upper Chest", "Front Deltoids"],
            secondary: ["Triceps", "Core"],
            stabilizers: ["Rotator Cuff", "Serratus Anterior"]
        },

        // BACK EXERCISES
        "Deadlifts": {
            primary: ["Lower Back", "Hamstrings"],
            secondary: ["Glutes", "Traps", "Forearms", "Quadriceps"],
            stabilizers: ["Core", "Upper Back", "Lats"]
        },
        "Pull-ups/Chin-ups": {
            primary: ["Latissimus Dorsi", "Upper Back"],
            secondary: ["Biceps", "Rear Deltoids"],
            stabilizers: ["Core", "Forearms", "Lower Traps"]
        },
        "Bent Over Rows": {
            primary: ["Upper Back", "Latissimus Dorsi"],
            secondary: ["Biceps", "Rear Deltoids", "Traps"],
            stabilizers: ["Lower Back", "Core", "Hamstrings"]
        },
        "T-Bar Rows": {
            primary: ["Upper Back", "Latissimus Dorsi"],
            secondary: ["Biceps", "Rear Deltoids", "Traps"],
            stabilizers: ["Lower Back", "Core"]
        },
        "Lat Pulldowns": {
            primary: ["Latissimus Dorsi"],
            secondary: ["Biceps", "Rear Deltoids", "Rhomboids"],
            stabilizers: ["Core", "Lower Traps"]
        },
        "Seated Cable Rows": {
            primary: ["Upper Back", "Latissimus Dorsi"],
            secondary: ["Biceps", "Rear Deltoids"],
            stabilizers: ["Core", "Lower Back"]
        },
        "Single-Arm Dumbbell Rows": {
            primary: ["Latissimus Dorsi", "Upper Back"],
            secondary: ["Biceps", "Rear Deltoids", "Traps"],
            stabilizers: ["Core", "Lower Back", "Obliques"]
        },
        "Meadows Rows": {
            primary: ["Latissimus Dorsi", "Upper Back"],
            secondary: ["Biceps", "Rear Deltoids"],
            stabilizers: ["Core", "Lower Back", "Obliques"]
        },
        "Straight Arm Pulldowns": {
            primary: ["Latissimus Dorsi"],
            secondary: ["Triceps", "Lower Chest"],
            stabilizers: ["Core", "Shoulders"]
        },
        "Rack Pulls": {
            primary: ["Upper Back", "Traps"],
            secondary: ["Lower Back", "Forearms"],
            stabilizers: ["Core", "Lats"]
        },

        // BICEPS EXERCISES
        "Standing Barbell Curls": {
            primary: ["Biceps Brachii"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Core", "Front Deltoids", "Wrist Flexors"]
        },
        "Alternating Dumbbell Curls": {
            primary: ["Biceps Brachii"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Core", "Shoulders", "Wrist Flexors"]
        },
        "Hammer Curls": {
            primary: ["Brachialis", "Brachioradialis"],
            secondary: ["Biceps Brachii", "Forearms"],
            stabilizers: ["Core", "Shoulders", "Wrist Flexors"]
        },
        "Preacher Curls": {
            primary: ["Biceps Brachii (Lower Head)"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Anterior Deltoid"]
        },
        "Incline Dumbbell Curls": {
            primary: ["Biceps Brachii (Long Head)"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Core", "Shoulders"]
        },
        "Spider Curls": {
            primary: ["Biceps Brachii (Short Head)"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Core", "Shoulders"]
        },
        "Cable Curls": {
            primary: ["Biceps Brachii"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Core", "Shoulders", "Wrist Flexors"]
        },
        "Concentration Curls": {
            primary: ["Biceps Brachii"],
            secondary: ["Brachialis"],
            stabilizers: ["Anterior Deltoid", "Wrist Flexors"]
        },
        "EZ Bar Curls": {
            primary: ["Biceps Brachii"],
            secondary: ["Brachialis", "Forearms"],
            stabilizers: ["Core", "Shoulders", "Wrist Flexors"]
        },
        "Reverse Curls": {
            primary: ["Brachioradialis", "Forearm Extensors"],
            secondary: ["Biceps Brachii", "Brachialis"],
            stabilizers: ["Core", "Shoulders"]
        },

        // TRICEPS EXERCISES
        "Close Grip Bench Press": {
            primary: ["Triceps (All Heads)"],
            secondary: ["Chest", "Front Deltoids"],
            stabilizers: ["Core", "Rotator Cuff"]
        },
        "Skull Crushers": {
            primary: ["Triceps (Long Head)"],
            secondary: ["Triceps (Lateral & Medial Heads)"],
            stabilizers: ["Core", "Shoulders"]
        },
        "Rope Pushdowns": {
            primary: ["Triceps (Lateral & Medial Heads)"],
            secondary: ["Triceps (Long Head)"],
            stabilizers: ["Core", "Shoulders"]
        },
        "V-Bar Pushdowns": {
            primary: ["Triceps (All Heads)"],
            secondary: ["Forearms"],
            stabilizers: ["Core", "Shoulders"]
        },
        "Overhead Extensions": {
            primary: ["Triceps (Long Head)"],
            secondary: ["Triceps (Lateral & Medial Heads)"],
            stabilizers: ["Core", "Shoulders", "Upper Back"]
        },
        "Diamond Push-ups": {
            primary: ["Triceps"],
            secondary: ["Chest", "Front Deltoids"],
            stabilizers: ["Core", "Serratus Anterior"]
        },
        "Single Arm Extensions": {
            primary: ["Triceps (All Heads)"],
            secondary: ["Forearms"],
            stabilizers: ["Core", "Shoulders", "Obliques"]
        },
        "JM Press": {
            primary: ["Triceps"],
            secondary: ["Front Deltoids", "Upper Chest"],
            stabilizers: ["Core", "Rotator Cuff"]
        },
        "French Press": {
            primary: ["Triceps (Long Head)"],
            secondary: ["Triceps (Lateral & Medial Heads)"],
            stabilizers: ["Core", "Shoulders"]
        },

        // SHOULDERS EXERCISES
        "Military Press": {
            primary: ["Front Deltoids", "Middle Deltoids"],
            secondary: ["Triceps", "Upper Chest", "Traps"],
            stabilizers: ["Core", "Rotator Cuff", "Lower Back"]
        },
        "Arnold Press": {
            primary: ["Front Deltoids", "Middle Deltoids"],
            secondary: ["Rear Deltoids", "Triceps"],
            stabilizers: ["Core", "Rotator Cuff", "Traps"]
        },
        "Lateral Raises": {
            primary: ["Middle Deltoids"],
            secondary: ["Front Deltoids", "Traps"],
            stabilizers: ["Rotator Cuff", "Core"]
        },
        "Face Pulls": {
            primary: ["Rear Deltoids", "Upper Back"],
            secondary: ["Middle Deltoids", "Rotator Cuff"],
            stabilizers: ["Core", "Lower Traps"]
        },
        "Reverse Pec Deck": {
            primary: ["Rear Deltoids"],
            secondary: ["Middle Deltoids", "Rhomboids"],
            stabilizers: ["Rotator Cuff", "Traps"]
        },
        "Front Raises": {
            primary: ["Front Deltoids"],
            secondary: ["Upper Chest", "Serratus Anterior"],
            stabilizers: ["Core", "Lower Back"]
        },
        "Bent Over Lateral Raises": {
            primary: ["Rear Deltoids"],
            secondary: ["Middle Deltoids", "Rhomboids"],
            stabilizers: ["Lower Back", "Core"]
        },
        "Cable Lateral Raises": {
            primary: ["Middle Deltoids"],
            secondary: ["Front Deltoids", "Traps"],
            stabilizers: ["Rotator Cuff", "Core"]
        },
        "Upright Rows": {
            primary: ["Middle Deltoids", "Traps"],
            secondary: ["Front Deltoids", "Biceps"],
            stabilizers: ["Core", "Forearms"]
        },
        "Behind Neck Press": {
            primary: ["Middle Deltoids", "Front Deltoids"],
            secondary: ["Triceps", "Traps"],
            stabilizers: ["Core", "Rotator Cuff"]
        },

        // LEGS EXERCISES
        "Back Squats": {
            primary: ["Quadriceps", "Glutes"],
            secondary: ["Hamstrings", "Lower Back", "Calves"],
            stabilizers: ["Core", "Adductors", "Hip Flexors"]
        },
        "Front Squats": {
            primary: ["Quadriceps", "Upper Back"],
            secondary: ["Glutes", "Core", "Hamstrings"],
            stabilizers: ["Lower Back", "Adductors"]
        },
        "Romanian Deadlifts": {
            primary: ["Hamstrings", "Glutes"],
            secondary: ["Lower Back", "Upper Back"],
            stabilizers: ["Core", "Forearms", "Traps"]
        },
        "Bulgarian Split Squats": {
            primary: ["Quadriceps", "Glutes"],
            secondary: ["Hamstrings", "Calves"],
            stabilizers: ["Core", "Hip Flexors", "Adductors"]
        },
        "Walking Lunges": {
            primary: ["Quadriceps", "Glutes"],
            secondary: ["Hamstrings", "Calves"],
            stabilizers: ["Core", "Hip Flexors", "Adductors"]
        },
        "Hack Squats": {
            primary: ["Quadriceps"],
            secondary: ["Glutes", "Hamstrings"],
            stabilizers: ["Core", "Lower Back", "Calves"]
        },
        "Leg Press": {
            primary: ["Quadriceps", "Glutes"],
            secondary: ["Hamstrings", "Calves"],
            stabilizers: ["Core", "Lower Back"]
        },
        "Standing Calf Raises": {
            primary: ["Gastrocnemius (Upper Calves)"],
            secondary: ["Soleus (Lower Calves)"],
            stabilizers: ["Tibialis Anterior", "Core"]
        },
        "Seated Calf Raises": {
            primary: ["Soleus (Lower Calves)"],
            secondary: ["Gastrocnemius (Upper Calves)"],
            stabilizers: ["Tibialis Anterior"]
        },
        "Leg Extensions": {
            primary: ["Quadriceps"],
            secondary: ["None"],
            stabilizers: ["Knee Stabilizers"]
        },
        "Lying Leg Curls": {
            primary: ["Hamstrings"],
            secondary: ["Calves"],
            stabilizers: ["Lower Back", "Core"]
        },
        "Good Mornings": {
            primary: ["Lower Back", "Hamstrings"],
            secondary: ["Glutes", "Upper Back"],
            stabilizers: ["Core", "Hip Flexors"]
        },
        "Hip Thrusts": {
            primary: ["Glutes"],
            secondary: ["Hamstrings", "Quadriceps"],
            stabilizers: ["Core", "Lower Back", "Hip Flexors"]
        },
        "Sissy Squats": {
            primary: ["Quadriceps"],
            secondary: ["Hip Flexors"],
            stabilizers: ["Core", "Knee Stabilizers"]
        },
        "Box Squats": {
            primary: ["Glutes", "Hamstrings"],
            secondary: ["Quadriceps", "Lower Back"],
            stabilizers: ["Core", "Hip Flexors", "Adductors"]
        }
    };

    // Initialize Select2 with search
    $(document).ready(function() {
        $('.select2').select2({
            width: 'style',
            placeholder: "Search or select exercise"
        });

        // Update tooltip when exercise is selected (using Select2 event)
        $('#exerciseSelect').on('select2:select', function(e) {
            updateTooltip(e.target.value);
        });

        // Also handle regular change event for safety
        $('#exerciseSelect').on('change', function() {
            updateTooltip(this.value);
        });
    });

    // Function to update tooltip content
    function updateTooltip(exerciseName) {
        const exercise = exerciseData[exerciseName];
        const tooltipContent = document.getElementById('exerciseInfo');
        
        if (exercise) {
            tooltipContent.innerHTML = `
                <div class="muscle-group">
                    <span class="muscle-group-label">Primary:</span> 
                    ${exercise.primary.join(', ')}
                </div>
                <div class="muscle-group">
                    <span class="muscle-group-label">Secondary:</span> 
                    ${exercise.secondary.join(', ')}
                </div>
                <div class="muscle-group">
                    <span class="muscle-group-label">Stabilizers:</span> 
                    ${exercise.stabilizers.join(', ')}
                </div>
            `;
        } else {
            tooltipContent.textContent = 'Select an exercise to see target muscles';
        }
    }

    document.getElementById('numSets').addEventListener('change', function() {
        const numSets = parseInt(this.value);
        const setInputsDiv = document.getElementById('setInputs');
        setInputsDiv.innerHTML = '';
        
        for (let i = 1; i <= numSets; i++) {
            const setDiv = document.createElement('div');
            setDiv.className = 'card mb-3';
            setDiv.innerHTML = `
                <div class="card-body">
                    <h5 class="card-title">Set ${i}</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <label class="form-label">Weight (kg):</label>
                            <input type="number" class="form-control" name="weight_${i}" 
                                   required min="0" step="0.5">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Reps:</label>
                            <input type="number" class="form-control" name="reps_${i}" 
                                   required min="1">
                        </div>
                    </div>
                </div>
            `;
            setInputsDiv.appendChild(setDiv);
        }
    });

    // Trigger the change event to create the first set input
    document.getElementById('numSets').dispatchEvent(new Event('change'));

    document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            events: [
                {% for exercise in exercises %}
                {
                    title: '{{ exercise.type }}',
                    start: '{{ exercise.date.strftime("%Y-%m-%dT%H:%M:%S") }}',
                    url: '#exercise-{{ exercise.id }}',
                    backgroundColor: '#007bff',
                },
                {% endfor %}
            ],
            eventClick: function(info) {
                info.jsEvent.preventDefault();
                const elementId = info.event.url.substring(1);
                const element = document.getElementById(elementId);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                    element.style.backgroundColor = '#fff3cd';
                    setTimeout(() => {
                        element.style.backgroundColor = '';
                    }, 2000);
                }
            },
            timeZone: 'Asia/Singapore'
        });
        calendar.render();
    });

    // Function to format date to YYYY-MM-DDThh:mm
    function formatDateForInput(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        const hours = String(date.getHours()).padStart(2, '0');
        const minutes = String(date.getMinutes()).padStart(2, '0');
        return `${year}-${month}-${day}T${hours}:${minutes}`;
    }

    // Set default date to now
    document.addEventListener('DOMContentLoaded', function() {
        const now = new Date();
        const dateInput = document.getElementById('exerciseDate');
        dateInput.value = formatDateForInput(now);
    });

    const quotes = [
        // Mindset & Mental Toughness (David Goggins)
        {
            text: "Don't stop when you're tired. Stop when you're done.",
            author: "David Goggins"
        },
        {
            text: "The pain you are willing to endure is measured by how bad you want it.",
            author: "David Goggins"
        },
        {
            text: "The mind is the most powerful weapon on the planet.",
            author: "David Goggins"
        },
        {
            text: "You have to build calluses on your brain just like you build calluses on your hands.",
            author: "David Goggins"
        },
        {
            text: "Nobody cares what you did yesterday. What have you done today to better yourself?",
            author: "David Goggins"
        },

        // Motivation & Success
        {
            text: "Success is not final, failure is not fatal: it is the courage to continue that counts.",
            author: "Winston Churchill"
        },
        {
            text: "Whether you think you can, or you think you can't â€“ you're right.",
            author: "Henry Ford"
        },
        {
            text: "Champions aren't made in gyms. Champions are made from something they have deep inside them.",
            author: "Muhammad Ali"
        },

        // Philosophy & Life Wisdom
        {
            text: "He who has a why to live can bear almost any how.",
            author: "Friedrich Nietzsche"
        },
        {
            text: "We are what we repeatedly do. Excellence, then, is not an act, but a habit.",
            author: "Aristotle"
        },
        {
            text: "What doesn't kill you makes you stronger.",
            author: "Friedrich Nietzsche"
        },

        // Fitness & Training
        {
            text: "The body achieves what the mind believes.",
            author: "Unknown"
        },
        {
            text: "Pain is weakness leaving the body.",
            author: "US Marine Corps"
        },
        {
            text: "If it doesn't challenge you, it doesn't change you.",
            author: "Fred DeVito"
        },

        // Perseverance & Discipline
        {
            text: "Discipline is choosing between what you want now and what you want most.",
            author: "Abraham Lincoln"
        },
        {
            text: "Fall seven times, stand up eight.",
            author: "Japanese Proverb"
        },
        {
            text: "Success isn't always about greatness. It's about consistency.",
            author: "Dwayne Johnson"
        },

        // Growth & Self-Improvement
        {
            text: "The only person you should try to be better than is the person you were yesterday.",
            author: "Unknown"
        },
        {
            text: "Small daily improvements are the key to staggering long-term results.",
            author: "Unknown"
        },

        // Mental Strength
        {
            text: "Your mind will quit 100 times before your body does.",
            author: "Unknown"
        },
        {
            text: "The pain of discipline is nothing compared to the pain of regret.",
            author: "Unknown"
        },
        {
            text: "Comfort is the enemy of progress.",
            author: "P.T. Barnum"
        }
    ];

    // Display random quote function remains the same
    function displayRandomQuote() {
        const quote = quotes[Math.floor(Math.random() * quotes.length)];
        document.getElementById('quote-text').textContent = `"${quote.text}"`;
        document.getElementById('quote-author').textContent = `- ${quote.author}`;
    }

    // Update quote every 6 hours instead of 24
    displayRandomQuote();
    setInterval(displayRandomQuote, 6 * 60 * 60 * 1000);

    function toggleQuote() {
        const quoteCard = document.getElementById('quoteCard');
        const toggleIcon = document.getElementById('quoteToggleIcon');
        
        quoteCard.classList.toggle('collapsed');
        
        if (quoteCard.classList.contains('collapsed')) {
            toggleIcon.classList.remove('bi-chevron-down');
            toggleIcon.classList.add('bi-chevron-up');
        } else {
            toggleIcon.classList.remove('bi-chevron-up');
            toggleIcon.classList.add('bi-chevron-down');
        }
    }
    </script>
</body>
</html>